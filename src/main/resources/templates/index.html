<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8">
    <title>Faculty</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"/>
</head>
<body>
<div th:replace="header :: header">
</div>
<br>
<div th:if="${param.success}">
    <div class="alert alert-info d-flex justify-content-center">You've successfully enrolled</div>
</div>
<div th:if="${param.error}">
    <div class="alert alert-danger d-flex justify-content-center">You've already enrolled</div>
</div>
<div style="margin-left: 163px">
    <form th:action="@{/courses/page/1}">
        <span th:text="#{course.search} + ':'"></span> <input type="text" name="keyword" id="keyword" size="50" th:value="${keyword}" required/>
        <input type="hidden" name="sortField" th:value="${sortField}"/>
        <input type="hidden" name="sortDir" th:value="${sortDir}"/>
        &nbsp;
        <input type="submit" th:value="#{course.search}"/>
        &nbsp;
        <input type="button" th:value="#{course.reset}" id="btnClear" onclick="clearSearch()"/>
    </form>
</div>
<br>
<button sec:authorize="hasRole('ROLE_ADMIN')" style="margin-left: 215px; margin-top: 50px" type="button"
        class="btn btn-success"><a style="text-decoration: none;
    color: #fafafa;" th:href="@{/courses/create}" th:text="#{course.add}"></a></button>
<div class="container my-9" style="margin-top: 100px">
    <table class="table table-bordered table-sm">
        <thead class="thead-dark">
        <tr>
            <th scope="col"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                       class="bi bi-sort-alpha-down" viewBox="0 0 16 16">
  <path fill-rule="evenodd"
        d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
  <path d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
</svg></span><a style="text-decoration: none;
    color: #fafafa;" class="d-flex justify-content-center"
                th:href="@{'/courses/page/' + ${currentPage} + '?sortField=title&sortDir=' + ${reverseSortDir}}"
                th:text="#{course.title}"></a></th>
            <th scope="col"><span class="d-flex justify-content-center" th:text="#{course.topic}"></span></th>
            <th scope="col"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                       class="bi bi-sort-alpha-down" viewBox="0 0 16 16">
  <path fill-rule="evenodd"
        d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
  <path d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
</svg></span> <a style="text-decoration: none;
    color: #fafafa;" class="d-flex justify-content-center"
                 th:href="@{'/courses/page/' + ${currentPage} + '?sortField=dateStart&sortDir=' + ${reverseSortDir}}"
                 th:text="#{course.date_start}"></a></th>
            <th scope="col"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                       class="bi bi-sort-alpha-down" viewBox="0 0 16 16">
  <path fill-rule="evenodd"
        d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
  <path d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
</svg></span><a style="text-decoration: none;
    color: #fafafa;" class="d-flex justify-content-center"
                th:href="@{'/courses/page/' + ${currentPage} + '?sortField=dateEnd&sortDir=' + ${reverseSortDir}}"
                th:text="#{course.date_end}"></a></th>
            <th scope="col"><span class="d-flex justify-content-center" th:text="#{course.lecturer}"></span></th>
            <th scope="col"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                       class="bi bi-sort-alpha-down" viewBox="0 0 16 16">
  <path fill-rule="evenodd"
        d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
  <path d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
</svg></span><a style="text-decoration: none;
    color: #fafafa;" class="d-flex justify-content-center"
                th:href="@{'/courses/page/' + ${currentPage} + '?sortField=amountStudent&sortDir=' + ${reverseSortDir}}"
                th:text="#{course.amount}"></a></th>
            <th scope="col"><span class="d-flex justify-content-center" th:text="#{course.enroll}"></span></th>
            <th scope="col" sec:authorize="hasRole('ROLE_ADMIN')"><span class="d-flex justify-content-center"
                                                                        th:text="#{course.update}"></span></th>
            <th scope="col" sec:authorize="hasRole('ROLE_ADMIN')"><span class="d-flex justify-content-center"
                                                                        th:text="#{course.delete}"></span></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="courses : ${courseList}">
            <td><span class="d-flex justify-content-center" th:text="${courses.title}"></span></td>
            <td><span class="d-flex justify-content-center" th:text="${courses.topic}"></span></td>
            <td><span class="d-flex justify-content-center"
                      th:text="${#temporals.format(courses.dateStart, 'yyyy-MM-dd, HH:mm')}"></span></td>
            <td><span class="d-flex justify-content-center"
                      th:text="${#temporals.format(courses.dateEnd, 'yyyy-MM-dd, HH:mm')}"></span></td>
            <td><span class="d-flex justify-content-center"
                      th:text="${courses.userLecturer.getFirstName() + ' ' + courses.userLecturer.getLastName()}"></span>
            </td>
            <td><span class="d-flex justify-content-center" th:text="${courses.amountStudent}"></span></td>
            <td>
                <form th:action="@{/courses}" method="post" class="d-flex justify-content-center">
                    <input type="hidden" name="coursesId" id="coursesId" th:value="${courses.id}"/>
                    <button type="submit" class="btn btn-success d-flex justify-content-center"
                            th:text="#{course.enroll}"></button>
                </form>
            </td>
            <td sec:authorize="hasRole('ROLE_ADMIN')">
                <form th:action="@{courses/{id}(id=${courses.id})}" th:method="get">
                    <button type="submit" class="btn btn-primary d-flex justify-content-center"
                            th:text="#{course.update}"></button>
                </form>
            </td>
            <td sec:authorize="hasRole('ROLE_ADMIN')">
                <form th:action="@{courses/{id}(id=${courses.id})}" th:method="delete">
                    <button type="submit" class="btn btn-danger d-flex justify-content-center"
                            th:text="#{course.delete}"></button>
                </form>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(courseList)}" class="btn-warning">
            <td colspan="9" align="center">Not found</td>
        </tr>
        </tbody>
    </table>
</div>
<div class="d-flex justify-content-center">
    Total Items: [[${totalItems}]] - Page [[${currentPage}]] of [[${totalPages}]]
</div>
<div class="d-flex justify-content-center">
    <button type="button" class="btn btn-info"><a style="text-decoration: none;
    color: #fafafa;" th:if="${currentPage > 1}"
                                                  th:href="@{'/courses/page/1' + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}"
                                                  th:text="#{first}"></a>
        <span th:unless="${currentPage > 1}" th:text="#{first}"></span></button>
    &nbsp;
    <button type="button" class="btn btn-info"><a style="text-decoration: none;
    color: #fafafa;" th:if="${currentPage > 1}"
                                                  th:href="@{'/courses/page/' + ${currentPage - 1}  + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}"
                                                  th:text="#{previous}"></a>
        <span th:unless="${currentPage > 1}" th:text="#{previous}"></span></button>
    &nbsp;
    <span th:each="i: ${#numbers.sequence(1, totalPages)}">
     <button type="button" class="btn btn-info">

    <a style="text-decoration: none;
    color: #fafafa;" th:if="${currentPage != i}"
       th:href="@{'/courses/page/' + ${i}  + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
    <span th:unless="${currentPage != i}" style="color: orangered">[[${i}]]</span>
     </button>
    &nbsp;</span>
    <button type="button" class="btn btn-info">
        <a style="text-decoration: none;
    color: #fafafa;" th:if="${currentPage < totalPages}"
           th:href="@{'/courses/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}"
           th:text="#{next}"></a>
        <span th:unless="${currentPage < totalPages}" th:text="#{next}"></span></button>&nbsp;
    <button type="button" class="btn btn-info"><a style="text-decoration: none;
    color: #fafafa;" th:if="${currentPage < totalPages}"
                                                  th:href="@{'/courses/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}"
                                                  th:text="#{last}"></a>
        <span th:unless="${currentPage < totalPages}" th:text="#{last}"></span></button>

</div>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script type="text/javascript">
    function clearSearch() {
        window.location = "[[@{/courses}]]";
    }
</script>
</body>
</html>